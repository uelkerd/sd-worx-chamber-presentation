<?xml version="1.0" encoding="UTF-8"?>
<svg id="mermaid-1" width="100%" height="100%" viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <style>
    /* Mermaid styling */
    .label { font-family: 'trebuchet ms', verdana, arial; font-size: 16px; }
    .node rect, .node circle, .node ellipse, .node polygon, .node path { fill: #f9f9f9; stroke: #333; stroke-width: 1px; }
    .process rect { fill: #f9f9f9; stroke: #333; stroke-width: 1px; }
    .decision rect, .decision path, .decision polygon { fill: #e7f2fa; stroke: #333; stroke-width: 1px; }
    .startEnd rect, .startEnd circle, .startEnd ellipse { fill: #d4edda; stroke: #333; stroke-width: 1px; }
    .bremen rect { fill: #dbeafe; stroke: #333; stroke-width: 1px; }
    .saarland rect { fill: #e0f2fe; stroke: #333; stroke-width: 1px; }
    .edgeLabel { background-color: white; padding: 6px; border-radius: 4px; font-size: 14px; }
    .edgePath .path { stroke: #333; stroke-width: 1.5px; }
    .cluster rect { fill: #f8f9fa; stroke: #999; stroke-width: 1px; stroke-dasharray: 5; }
    .cluster .label { fill: #606060; font-size: 20px; font-weight: bold; }
  </style>

  <!-- Bremen Process -->
  <g class="cluster">
    <rect x="50" y="50" width="450" height="700" rx="10" ry="10" fill="#f8f9fa" stroke="#999" stroke-width="1" stroke-dasharray="5" />
    <text x="275" y="80" text-anchor="middle" class="label">Bremen</text>
    
    <!-- Start -->
    <g class="node startEnd" transform="translate(275, 130)">
      <ellipse rx="50" ry="30" />
      <text x="0" y="5" text-anchor="middle" class="label">Start</text>
    </g>
    
    <!-- Input -->
    <g class="node process" transform="translate(275, 210)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Bruttogehalt: €10.000</text>
    </g>
    
    <!-- Base -->
    <g class="node process" transform="translate(275, 300)">
      <rect width="280" height="70" rx="5" ry="5" x="-140" y="-35" />
      <text x="0" y="-15" text-anchor="middle" class="label">Bemessungsgrundlage:</text>
      <text x="0" y="10" text-anchor="middle" class="label">Steuerpflichtiger Arbeitslohn</text>
    </g>
    
    <!-- Check -->
    <g class="node decision" transform="translate(275, 400)">
      <polygon points="-80,0 0,-80 80,0 0,80" />
      <text x="0" y="5" text-anchor="middle" class="label">BBG-Prüfung?</text>
    </g>
    
    <!-- Full -->
    <g class="node process" transform="translate(275, 500)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Voller Betrag: €10.000</text>
    </g>
    
    <!-- Calc -->
    <g class="node process" transform="translate(275, 580)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">€10.000 × 0,12%</text>
    </g>
    
    <!-- Result -->
    <g class="node bremen" transform="translate(275, 650)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Ergebnis: €12,00</text>
    </g>
    
    <!-- End -->
    <g class="node startEnd" transform="translate(275, 720)">
      <ellipse rx="50" ry="30" />
      <text x="0" y="5" text-anchor="middle" class="label">Ende</text>
    </g>
    
    <!-- Edges -->
    <path d="M275,160 L275,190" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,230 L275,265" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,335 L275,360" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,440 L275,480" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,520 L275,560" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,600 L275,630" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,670 L275,690" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    
    <!-- Edge Labels -->
    <g class="edgeLabel" transform="translate(275, 450)">
      <rect width="140" height="25" x="-70" y="-12" fill="white" />
      <text x="0" y="5" text-anchor="middle" class="label">Nein (keine BBG)</text>
    </g>
  </g>
  
  <!-- Saarland Process -->
  <g class="cluster" transform="translate(600, 0)">
    <rect x="50" y="50" width="450" height="700" rx="10" ry="10" fill="#f8f9fa" stroke="#999" stroke-width="1" stroke-dasharray="5" />
    <text x="275" y="80" text-anchor="middle" class="label">Saarland</text>
    
    <!-- Start -->
    <g class="node startEnd" transform="translate(275, 130)">
      <ellipse rx="50" ry="30" />
      <text x="0" y="5" text-anchor="middle" class="label">Start</text>
    </g>
    
    <!-- Input -->
    <g class="node process" transform="translate(275, 210)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Bruttogehalt: €10.000</text>
    </g>
    
    <!-- Base -->
    <g class="node process" transform="translate(275, 300)">
      <rect width="280" height="70" rx="5" ry="5" x="-140" y="-35" />
      <text x="0" y="-15" text-anchor="middle" class="label">Bemessungsgrundlage:</text>
      <text x="0" y="10" text-anchor="middle" class="label">SV-pflichtiges Bruttoentgelt</text>
    </g>
    
    <!-- Check -->
    <g class="node decision" transform="translate(275, 400)">
      <polygon points="-80,0 0,-80 80,0 0,80" />
      <text x="0" y="-15" text-anchor="middle" class="label">BBG-Prüfung:</text>
      <text x="0" y="15" text-anchor="middle" class="label">> €8.050?</text>
    </g>
    
    <!-- Cap -->
    <g class="node process" transform="translate(195, 500)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Gedeckelt: €8.050</text>
    </g>
    
    <!-- NoCap -->
    <g class="node process" transform="translate(355, 500)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Voller Betrag</text>
    </g>
    
    <!-- Calc -->
    <g class="node process" transform="translate(195, 560)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">€8.050 × 0,15%</text>
    </g>
    
    <!-- CalcFull -->
    <g class="node process" transform="translate(355, 560)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Bruttogehalt × 0,15%</text>
    </g>
    
    <!-- Round -->
    <g class="node process" transform="translate(275, 620)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Rundung: €12,075</text>
    </g>
    
    <!-- Result -->
    <g class="node saarland" transform="translate(275, 680)">
      <rect width="220" height="40" rx="5" ry="5" x="-110" y="-20" />
      <text x="0" y="5" text-anchor="middle" class="label">Ergebnis: €12,08</text>
    </g>
    
    <!-- End -->
    <g class="node startEnd" transform="translate(275, 750)">
      <ellipse rx="50" ry="30" />
      <text x="0" y="5" text-anchor="middle" class="label">Ende</text>
    </g>
    
    <!-- Edges -->
    <path d="M275,160 L275,190" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,230 L275,265" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,335 L275,360" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,440 L195,480" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,440 L355,480" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M195,520 L195,540" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M355,520 L355,540" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M195,580 L275,600" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M355,580 L275,600" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,640 L275,660" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M275,700 L275,720" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    
    <!-- Edge Labels -->
    <g class="edgeLabel" transform="translate(220, 450)">
      <rect width="50" height="25" x="-25" y="-12" fill="white" />
      <text x="0" y="5" text-anchor="middle" class="label">Ja</text>
    </g>
    <g class="edgeLabel" transform="translate(330, 450)">
      <rect width="50" height="25" x="-25" y="-12" fill="white" />
      <text x="0" y="5" text-anchor="middle" class="label">Nein</text>
    </g>
  </g>
</svg> 