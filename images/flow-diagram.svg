<?xml version="1.0" encoding="UTF-8"?>
<svg id="mermaid-1" width="100%" height="100%" viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <style>
    /* Mermaid styling */
    .label { font-family: 'trebuchet ms', verdana, arial; font-size: 14px; }
    .node rect, .node circle, .node ellipse, .node polygon, .node path { fill: #f9f9f9; stroke: #333; stroke-width: 1px; }
    .process rect { fill: #f9f9f9; stroke: #333; stroke-width: 1px; }
    .decision rect, .decision path, .decision polygon { fill: #e7f2fa; stroke: #333; stroke-width: 1px; }
    .startEnd rect, .startEnd circle, .startEnd ellipse { fill: #d4edda; stroke: #333; stroke-width: 1px; }
    .bremen rect { fill: #dbeafe; stroke: #333; stroke-width: 1px; }
    .saarland rect { fill: #e0f2fe; stroke: #333; stroke-width: 1px; }
    .edgeLabel { background-color: white; padding: 2px; border-radius: 4px; }
    .edgePath .path { stroke: #333; stroke-width: 1.5px; }
    .cluster rect { fill: #f8f9fa; stroke: #999; stroke-width: 1px; stroke-dasharray: 5; }
    .cluster .label { fill: #606060; }
  </style>

  <!-- Bremen Process -->
  <g class="cluster">
    <rect x="20" y="20" width="400" height="350" rx="5" ry="5" fill="#f8f9fa" stroke="#999" stroke-width="1" stroke-dasharray="5" />
    <text x="220" y="40" text-anchor="middle" class="label">Bremen</text>
    
    <!-- Start -->
    <g class="node startEnd" transform="translate(220, 80)">
      <ellipse rx="40" ry="20" />
      <text x="0" y="5" text-anchor="middle" class="label">Start</text>
    </g>
    
    <!-- Input -->
    <g class="node process" transform="translate(220, 130)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Bruttogehalt: €10.000</text>
    </g>
    
    <!-- Base -->
    <g class="node process" transform="translate(220, 180)">
      <rect width="220" height="50" rx="5" ry="5" x="-110" y="-25" />
      <text x="0" y="-10" text-anchor="middle" class="label">Bemessungsgrundlage:</text>
      <text x="0" y="10" text-anchor="middle" class="label">Steuerpflichtiger Arbeitslohn</text>
    </g>
    
    <!-- Check -->
    <g class="node decision" transform="translate(220, 240)">
      <polygon points="-60,0 0,-60 60,0 0,60" />
      <text x="0" y="5" text-anchor="middle" class="label">BBG-Prüfung?</text>
    </g>
    
    <!-- Full -->
    <g class="node process" transform="translate(220, 300)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Voller Betrag: €10.000</text>
    </g>
    
    <!-- Calc -->
    <g class="node process" transform="translate(220, 350)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">€10.000 × 0,12%</text>
    </g>
    
    <!-- Result -->
    <g class="node bremen" transform="translate(220, 400)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Ergebnis: €12,00</text>
    </g>
    
    <!-- End -->
    <g class="node startEnd" transform="translate(220, 450)">
      <ellipse rx="40" ry="20" />
      <text x="0" y="5" text-anchor="middle" class="label">Ende</text>
    </g>
    
    <!-- Edges -->
    <path d="M220,100 L220,115" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,145 L220,155" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,205 L220,215" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,265 L220,285" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,315 L220,335" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,365 L220,385" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,415 L220,430" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    
    <!-- Edge Labels -->
    <g class="edgeLabel" transform="translate(220, 270)">
      <rect width="120" height="20" x="-60" y="-10" fill="white" />
      <text x="0" y="5" text-anchor="middle" class="label">Nein (keine BBG)</text>
    </g>
  </g>
  
  <!-- Saarland Process -->
  <g class="cluster" transform="translate(450, 0)">
    <rect x="20" y="20" width="400" height="500" rx="5" ry="5" fill="#f8f9fa" stroke="#999" stroke-width="1" stroke-dasharray="5" />
    <text x="220" y="40" text-anchor="middle" class="label">Saarland</text>
    
    <!-- Start -->
    <g class="node startEnd" transform="translate(220, 80)">
      <ellipse rx="40" ry="20" />
      <text x="0" y="5" text-anchor="middle" class="label">Start</text>
    </g>
    
    <!-- Input -->
    <g class="node process" transform="translate(220, 130)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Bruttogehalt: €10.000</text>
    </g>
    
    <!-- Base -->
    <g class="node process" transform="translate(220, 180)">
      <rect width="220" height="50" rx="5" ry="5" x="-110" y="-25" />
      <text x="0" y="-10" text-anchor="middle" class="label">Bemessungsgrundlage:</text>
      <text x="0" y="10" text-anchor="middle" class="label">SV-pflichtiges Bruttoentgelt</text>
    </g>
    
    <!-- Check -->
    <g class="node decision" transform="translate(220, 240)">
      <polygon points="-60,0 0,-60 60,0 0,60" />
      <text x="0" y="-5" text-anchor="middle" class="label">BBG-Prüfung:</text>
      <text x="0" y="15" text-anchor="middle" class="label">> €8.050?</text>
    </g>
    
    <!-- Cap -->
    <g class="node process" transform="translate(160, 320)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Gedeckelt: €8.050</text>
    </g>
    
    <!-- NoCap -->
    <g class="node process" transform="translate(280, 320)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Voller Betrag</text>
    </g>
    
    <!-- Calc -->
    <g class="node process" transform="translate(160, 370)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">€8.050 × 0,15%</text>
    </g>
    
    <!-- CalcFull -->
    <g class="node process" transform="translate(280, 370)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Bruttogehalt × 0,15%</text>
    </g>
    
    <!-- Round -->
    <g class="node process" transform="translate(220, 420)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Rundung: €12,075</text>
    </g>
    
    <!-- Result -->
    <g class="node saarland" transform="translate(220, 470)">
      <rect width="180" height="30" rx="5" ry="5" x="-90" y="-15" />
      <text x="0" y="5" text-anchor="middle" class="label">Ergebnis: €12,08</text>
    </g>
    
    <!-- End -->
    <g class="node startEnd" transform="translate(220, 520)">
      <ellipse rx="40" ry="20" />
      <text x="0" y="5" text-anchor="middle" class="label">Ende</text>
    </g>
    
    <!-- Edges -->
    <path d="M220,100 L220,115" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,145 L220,155" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,205 L220,215" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,265 L160,305" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,265 L280,305" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M160,335 L160,355" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M280,335 L280,355" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M160,385 L220,405" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M280,385 L220,405" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,435 L220,455" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    <path d="M220,485 L220,500" class="edgePath" fill="none" stroke="#333" stroke-width="1.5" />
    
    <!-- Edge Labels -->
    <g class="edgeLabel" transform="translate(180, 280)">
      <rect width="40" height="20" x="-20" y="-10" fill="white" />
      <text x="0" y="5" text-anchor="middle" class="label">Ja</text>
    </g>
    <g class="edgeLabel" transform="translate(260, 280)">
      <rect width="40" height="20" x="-20" y="-10" fill="white" />
      <text x="0" y="5" text-anchor="middle" class="label">Nein</text>
    </g>
  </g>
</svg> 